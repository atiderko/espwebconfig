<!DOCTYPE html>
<html lang="en">

  <head>
    <meta name="viewport" charset="UTF-8" content="width=device-width, initial-scale=1, user-scalable=yes">
    <title>E-Mail Setup</title>
    <link rel="stylesheet" href="/css/base.css">
    <script src="/js/pre.js"></script>
  </head>

  <body style="padding-top:58px;">
    <div id="header"></div>
    <div class="base-panel">
        <form action="/mail/save" method="post">
          <div class="noorder">
            <div>
              <input id="on_warning" type="checkbox" name="on_warning" value="true" checked> Send on warning</input>
              <label id="info_on_warning">&#128712; Sned only warnings, e.g. no water</label>
            </div>
            <div>
              <input id="on_change" type="checkbox" name="on_change" value="true" checked> Send on change</input>
              <label id="info_on_change">&#128712; Send on state changes, e.g. flower are dry</label>
            </div>
            <div>
              <input id="on_event" type="checkbox" name="on_event" value="false"> Send on each event</input>
            </div>
            <div>
                <label id="lbl_receiver" for="receiver">Receiver:</label>
                <input id="receiver" type="text" name="receiver" placeholder="receiver@mail.de" pattern='[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}'>
                <label id="info_receiver">&#128712; E-Mail address to receive notifications.</label>
            </div>
            <div>
                <label id="lbl_sender" for="sender">Sender:</label>
                <input id="sender" type="text" name="sender" placeholder="sender@mail.de" pattern='[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}'>
            </div>
            <div>
                <label id="lbl_smtp" for="smtp">STMP Server</label>
                <input id="smtp" type="text" name="smtp" placeholder="mx2fbd.netcup.net">
            </div>
            <div>
                <label id="lbl_smtp" for="smtp">STMP Port</label>
                <input id="port" type="text" name="port" placeholder="25">
            </div>
            <div>
                <label id="lbl_passphrase" for="passphrase">Password</label>
                <input id="passphrase" type="password" name="passphrase" placeholder="Passphrase">
                <input id="httpass-status" type="checkbox" aria-hidden="true" onClick="viewPassword('passphrase', '')">
            </div>
          </div>
          <input type="submit" name="apply" value="Apply">
          <input id="btn_test_send" type="button" style="margin:12px 5px 15px 20px;width:9em; background: #2060e9;" onClick="onTestMail();" value="Save & Test">
        </form>
    </div>

<script type="text/javascript">
function onTestMail() {
  location.href='/mail/test';
}
</script>
<script src="/js/mail.js"></script>
<script>jsons = [ ["/mail/config", "mailconfig"] ];</script>
<script src="/js/postload.js"></script>
</body>
</html>